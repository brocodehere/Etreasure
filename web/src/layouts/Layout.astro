---
import '../styles/global.css';

export interface Props {
	title: string;
	description?: string;
	keywords?: string;
	author?: string;
	robots?: string;
	canonical?: string;
	ogTitle?: string;
	ogDescription?: string;
	ogImage?: string;
	ogUrl?: string;
	ogType?: string;
	twitterCard?: string;
	twitterTitle?: string;
	twitterDescription?: string;
	twitterImage?: string;
	structuredData?: any;
}

const { 
	title, 
	description = "Ethnic Treasures - Crafting Tradition, Weaving Stories", 
	keywords = "ethnic wear, traditional clothing, handcrafted, cultural fashion, artisan products",
	author = "Ethnic Treasures",
	robots = "index, follow",
	canonical,
	ogTitle,
	ogDescription = description,
	ogImage = "/images/og-default.jpg",
	ogUrl,
	ogType = "website",
	twitterCard = "summary_large_image",
	twitterTitle,
	twitterDescription = description,
	twitterImage = ogImage,
	structuredData
} = Astro.props;

// Get current URL for canonical and OG tags
const currentUrl = canonical || Astro.url.href;
const siteUrl = new URL(Astro.url.origin);
const fullOgUrl = ogUrl || currentUrl;
const fullOgImage = ogImage.startsWith('http') ? ogImage : new URL(ogImage, siteUrl).href;
const fullTwitterImage = twitterImage.startsWith('http') ? twitterImage : new URL(twitterImage, siteUrl).href;
---

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content={description} />
	<meta name="keywords" content={keywords} />
	<meta name="author" content={author} />
	<meta name="robots" content={robots} />
	<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
	
	<!-- Canonical URL -->
	<link rel="canonical" href={currentUrl} />
	
	<!-- Open Graph Tags -->
	<meta property="og:title" content={ogTitle || title} />
	<meta property="og:description" content={ogDescription} />
	<meta property="og:image" content={fullOgImage} />
	<meta property="og:url" content={fullOgUrl} />
	<meta property="og:type" content={ogType} />
	<meta property="og:site_name" content="Ethnic Treasures" />
	
	<!-- Twitter Card Tags -->
	<meta name="twitter:card" content={twitterCard} />
	<meta name="twitter:title" content={twitterTitle || title} />
	<meta name="twitter:description" content={twitterDescription} />
	<meta name="twitter:image" content={fullTwitterImage} />
	<meta name="twitter:site" content="@EthnicTreasures" />
	
	<title>{title}</title>
	
	<!-- Structured Data -->
	{structuredData && (
		<script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
	)}
	
	<!-- Default Organization Schema -->
	<script type="application/ld+json">
	{{
		"@context": "https://schema.org",
		"@type": "Organization",
		"name": "Ethnic Treasures",
		"url": Astro.url.origin,
		"logo": new URL("/images/logo.png", Astro.url.origin).href,
		"description": "Crafting Tradition, Weaving Stories - Premium ethnic wear and handcrafted products",
		"sameAs": [
			"https://www.instagram.com/ethnic.treasures",
			"https://www.facebook.com/EthnicTreasures",
			"https://twitter.com/EthnicTreasures"
		],
		"contactPoint": {
			"@type": "ContactPoint",
			"telephone": "+1-555-ETHNIC",
			"contactType": "customer service"
		}
	}}
	</script>
	
	<script src="https://checkout.razorpay.com/v1/checkout.js" defer></script>
</head>
<body class="min-h-screen bg-cream">
	<slot />
</body>
</html>
